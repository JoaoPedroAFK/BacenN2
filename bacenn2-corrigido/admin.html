<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Configura√ß√µes</title>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Anton&display=swap" rel="stylesheet">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/theme-dark.css">
    
    <style>
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .admin-header {
            background: var(--azul-royal);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .admin-header h1 {
            margin: 0;
            font-size: 2em;
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--borda);
        }
        
        .admin-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1em;
            color: var(--texto-secundario);
            transition: all 0.3s;
        }
        
        .admin-tab.active {
            color: var(--azul-royal);
            border-bottom-color: var(--azul-royal);
            font-weight: 600;
        }
        
        .admin-tab:hover {
            color: var(--azul-royal);
        }
        
        .admin-content {
            display: none;
        }
        
        .admin-content.active {
            display: block;
        }
        
        .config-section {
            background: var(--fundo-card);
            border: 1px solid var(--borda);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .config-section h3 {
            margin-top: 0;
            color: var(--texto-principal);
            border-bottom: 2px solid var(--azul-royal);
            padding-bottom: 10px;
        }
        
        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--fundo-secundario);
            border-radius: 6px;
            margin-bottom: 10px;
        }
        
        .config-item-info {
            flex: 1;
        }
        
        .config-item-label {
            font-weight: 600;
            color: var(--texto-principal);
            margin-bottom: 5px;
        }
        
        .config-item-type {
            font-size: 0.9em;
            color: var(--texto-secundario);
        }
        
        .config-item-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-admin {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .btn-edit {
            background: var(--azul-royal);
            color: white;
        }
        
        .btn-edit:hover {
            background: var(--azul-royal-hover);
        }
        
        .btn-delete {
            background: #ff4757;
            color: white;
        }
        
        .btn-delete:hover {
            background: #ff3838;
        }
        
        .btn-add {
            background: #2ed573;
            color: white;
            padding: 12px 24px;
            margin-bottom: 20px;
        }
        
        .btn-add:hover {
            background: #26de81;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--fundo-card);
            background-color: #ffffff;
            border-radius: 8px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 10001;
        }
        
        .dark .modal-content {
            background-color: #1e1e1e;
            color: #ffffff;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-header h2 {
            margin: 0;
            color: var(--texto-principal);
        }
        
        .btn-close {
            background: transparent;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--texto-secundario);
        }
        
        .form-group-admin {
            margin-bottom: 20px;
        }
        
        .form-group-admin label {
            display: block;
            margin-bottom: 8px;
            color: var(--texto-principal);
            font-weight: 500;
        }
        
        .form-group-admin input,
        .form-group-admin select,
        .form-group-admin textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--borda);
            border-radius: 4px;
            background: var(--fundo-secundario);
            color: var(--texto-principal);
            font-size: 1em;
        }
        
        .options-list {
            margin-top: 10px;
        }
        
        .option-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .option-item input {
            flex: 1;
        }
        
        .btn-remove-option {
            background: #ff4757;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .btn-add-option {
            background: var(--azul-royal);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .status-message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }
        
        .status-message.success {
            background: #2ed573;
            color: white;
            display: block;
        }
        
        .status-message.error {
            background: #ff4757;
            color: white;
            display: block;
        }
    </style>
</head>
<body>
    <div class="velohub-header">
        <div class="header-content">
            <h1>üîß Painel Administrativo</h1>
            <div class="header-actions">
                <a href="index.html" class="velohub-btn btn-secondary">‚Üê Voltar</a>
            </div>
        </div>
    </div>

    <div class="admin-container">
        <div class="admin-header">
            <h1>‚öôÔ∏è Gerenciamento de Configura√ß√µes</h1>
            <p>Gerencie categorias, listas e checkboxes dos formul√°rios</p>
        </div>

        <div id="status-message" class="status-message"></div>

        <div class="admin-tabs">
            <button class="admin-tab active" onclick="mostrarAba('campos-texto')">üìù Campos de Texto</button>
            <button class="admin-tab" onclick="mostrarAba('listas')">üìã Listas (Selects)</button>
            <button class="admin-tab" onclick="mostrarAba('checkboxes')">‚òëÔ∏è Checkboxes</button>
            <button class="admin-tab" onclick="mostrarAba('editar-fichas')">‚úèÔ∏è Editar Fichas Existentes</button>
            <button class="admin-tab" onclick="mostrarAba('historico')">üìú Hist√≥rico</button>
        </div>

        <!-- Aba Campos de Texto -->
        <div id="aba-campos-texto" class="admin-content active">
            <div class="config-section">
                <h3>üìù Campos de Texto</h3>
                <p style="color: var(--texto-secundario); margin-bottom: 20px;">Gerencie campos de texto que aparecem nos formul√°rios de cria√ß√£o de reclama√ß√µes</p>
                <button class="btn-admin btn-add" onclick="abrirModalCampoTexto()">‚ûï Adicionar Campo de Texto</button>
                <div id="campos-texto-list"></div>
            </div>
        </div>

        <!-- Aba Listas -->
        <div id="aba-listas" class="admin-content">
            <div class="config-section">
                <h3>üìã Listas (Selects)</h3>
                <p style="color: var(--texto-secundario); margin-bottom: 20px;">Gerencie campos de sele√ß√£o (dropdowns) que aparecem nos formul√°rios</p>
                <button class="btn-admin btn-add" onclick="abrirModalLista()">‚ûï Adicionar Lista</button>
                <div id="listas-list"></div>
            </div>
        </div>

        <!-- Aba Checkboxes -->
        <div id="aba-checkboxes" class="admin-content">
            <div class="config-section">
                <h3>‚òëÔ∏è Checkboxes</h3>
                <p style="color: var(--texto-secundario); margin-bottom: 20px;">Gerencie campos de checkbox que aparecem nos formul√°rios</p>
                <button class="btn-admin btn-add" onclick="abrirModalCheckbox()">‚ûï Adicionar Checkbox</button>
                <div id="checkboxes-list"></div>
            </div>
        </div>

        <!-- Aba Editar Fichas Existentes -->
        <div id="aba-editar-fichas" class="admin-content">
            <div class="config-section">
                <h3>‚úèÔ∏è Editar Campos de Fichas Existentes</h3>
                <p style="color: var(--texto-secundario); margin-bottom: 20px;">Visualize, edite, adicione ou remova campos das fichas j√° configuradas</p>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--texto-principal); font-weight: 500;">Selecione o tipo de ficha:</label>
                    <select id="tipo-ficha-editar" class="form-group-admin" style="width: 200px; padding: 10px; border: 1px solid var(--borda); border-radius: 4px; background: var(--fundo-secundario); color: var(--texto-principal);" onchange="adminConfig.carregarCamposFicha()">
                        <option value="">Selecione...</option>
                        <option value="bacen">BACEN</option>
                        <option value="n2">N2</option>
                        <option value="chatbot">Chatbot</option>
                    </select>
                </div>
                
                <div id="campos-ficha-editaveis" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Aba Hist√≥rico -->
        <div id="aba-historico" class="admin-content">
            <div class="config-section">
                <h3>üìú Hist√≥rico de Altera√ß√µes</h3>
                <p style="color: var(--texto-secundario); margin-bottom: 20px;">Registro de todas as altera√ß√µes realizadas nas configura√ß√µes</p>
                <div id="historico-list"></div>
            </div>
        </div>
    </div>

    <!-- Modal para Categoria/Lista/Checkbox -->
    <div id="modal-config" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Editar Configura√ß√£o</h2>
                <button class="btn-close" onclick="fecharModal()">‚úï</button>
            </div>
            <form id="form-config">
                <input type="hidden" id="config-id">
                <input type="hidden" id="config-tipo">
                
                <div class="form-group-admin">
                    <label for="config-nome">Nome/ID (identificador √∫nico) *</label>
                    <input type="text" id="config-nome" required placeholder="Ex: motivo-detalhado, observacoes-adicionais">
                    <small style="color: var(--texto-secundario); font-size: 0.9em;">Use apenas letras min√∫sculas, n√∫meros e h√≠fens</small>
                </div>
                
                <div class="form-group-admin">
                    <label for="config-label">Label (texto exibido no formul√°rio) *</label>
                    <input type="text" id="config-label" required placeholder="Ex: Motivo Detalhado, Observa√ß√µes Adicionais">
                </div>
                
                <div class="form-group-admin">
                    <label for="config-categoria">Categoria (onde o campo aparecer√°) *</label>
                    <select id="config-categoria" required>
                        <option value="">Selecione...</option>
                        <option value="bacen">BACEN</option>
                        <option value="n2">N2</option>
                        <option value="chatbot">Chatbot</option>
                        <option value="todos">Todos (BACEN, N2 e Chatbot)</option>
                    </select>
                </div>
                
                <div class="form-group-admin" id="config-tipo-campo-group">
                    <label for="config-tipo-campo">Tipo de Campo *</label>
                    <select id="config-tipo-campo" required onchange="adminConfig.alterarTipoCampo()">
                        <option value="texto">Texto</option>
                        <option value="textarea">√Årea de Texto (m√∫ltiplas linhas)</option>
                        <option value="data">Data</option>
                        <option value="numero">N√∫mero</option>
                        <option value="email">E-mail</option>
                        <option value="telefone">Telefone</option>
                        <option value="cpf">CPF</option>
                    </select>
                </div>
                
                <div class="form-group-admin" id="config-opcoes-group" style="display: none;">
                    <label>Op√ß√µes (para campos de sele√ß√£o) *</label>
                    <div id="config-opcoes-list" class="options-list"></div>
                    <button type="button" class="btn-add-option" onclick="adicionarOpcao()">‚ûï Adicionar Op√ß√£o</button>
                </div>
                
                <div class="form-group-admin">
                    <label for="config-obrigatorio">Campo Obrigat√≥rio?</label>
                    <select id="config-obrigatorio">
                        <option value="false">N√£o</option>
                        <option value="true">Sim</option>
                    </select>
                </div>
                
                <div class="form-group-admin">
                    <label for="config-placeholder">Placeholder (texto de exemplo)</label>
                    <input type="text" id="config-placeholder" placeholder="Ex: Digite o motivo detalhado...">
                </div>
                
                <div class="form-group-admin">
                    <label for="config-observacoes">Observa√ß√µes</label>
                    <textarea id="config-observacoes" rows="3" placeholder="Notas internas sobre este campo"></textarea>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn-admin btn-secondary" onclick="fecharModal()">Cancelar</button>
                    <button type="submit" class="btn-admin btn-edit">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="js/config-firebase.js"></script>
    <script src="js/firebase-db.js"></script>
    
    <!-- Script do Painel Admin -->
    <script src="js/admin-configuracoes.js"></script>
</body>
</html>
